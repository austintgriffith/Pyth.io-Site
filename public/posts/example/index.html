<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.29" />
    <meta name="description" content="">
<meta name="author" content="Austin Thomas Griffith M.S. E.E.">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />

    <title>Example :: RequestCoin</title>
    
    
    <link href="/css/nucleus.css?1507892884" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1507892884" rel="stylesheet">
    <link href="/css/hybrid.css?1507892884" rel="stylesheet">
    <link href="/css/featherlight.min.css?1507892884" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1507892884" rel="stylesheet">
    <link href="/css/auto-complete.css?1507892884" rel="stylesheet">
    <link href="/css/theme.css?1507892884" rel="stylesheet">
    <link href="/css/hugo-theme.css?1507892884" rel="stylesheet">
    
      <link href="/css/theme-red.css?1507892884" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1507892884"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/posts/example/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/posts/introduction">
  <img src="/images/white.png" />
</a>

    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/posts/" title="Posts" class="dd-item
        parent
        
        
        ">
      <a href="/posts/">
          Posts
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/posts/introduction/" title="Introduction" class="dd-item ">
        <a href="/posts/introduction/">
        Introduction
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/example/" title="Example" class="dd-item active">
        <a href="/posts/example/">
        Example
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/utilitytoken/" title="Utility Token" class="dd-item ">
        <a href="/posts/utilitytoken/">
        Utility Token
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/offchainconsensus/" title="Off-chain Consensus" class="dd-item ">
        <a href="/posts/offchainconsensus/">
        Off-chain Consensus
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/contractlineage/" title="Contract Lineage" class="dd-item ">
        <a href="/posts/contractlineage/">
        Contract Lineage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/governance/" title="Governance" class="dd-item ">
        <a href="/posts/governance/">
        Governance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/provisioning/" title="Provisioning" class="dd-item ">
        <a href="/posts/provisioning/">
        Provisioning
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/ethereuminteraction/" title="Ethereum Network Interaction" class="dd-item ">
        <a href="/posts/ethereuminteraction/">
        Ethereum Network Interaction
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/craftingscripts/" title="Crafting Scripts" class="dd-item ">
        <a href="/posts/craftingscripts/">
        Crafting Scripts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/deployingacontract/" title="Deploying A Contract" class="dd-item ">
        <a href="/posts/deployingacontract/">
        Deploying A Contract
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/contracttocontract/" title="Contract To Contract" class="dd-item ">
        <a href="/posts/contracttocontract/">
        Contract To Contract
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/contractinheritance/" title="Contract Inheritance" class="dd-item ">
        <a href="/posts/contractinheritance/">
        Contract Inheritance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/contractmigration/" title="Contract Migration" class="dd-item ">
        <a href="/posts/contractmigration/">
        Contract Migration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/fleet/" title="Fleet" class="dd-item ">
        <a href="/posts/fleet/">
        Fleet
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/authcontract/" title="Auth Contract" class="dd-item ">
        <a href="/posts/authcontract/">
        Auth Contract
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/maincontract/" title="Main Contract" class="dd-item ">
        <a href="/posts/maincontract/">
        Main Contract
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/tokencontract/" title="Token Contract" class="dd-item ">
        <a href="/posts/tokencontract/">
        Token Contract
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/requestscontract/" title="Requests Contract" class="dd-item ">
        <a href="/posts/requestscontract/">
        Requests Contract
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/combinercontracts/" title="Combiner Contracts" class="dd-item ">
        <a href="/posts/combinercontracts/">
        Combiner Contracts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/miner/" title="Request Miner" class="dd-item ">
        <a href="/posts/miner/">
        Request Miner
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/simplification/" title="Simplification" class="dd-item ">
        <a href="/posts/simplification/">
        Simplification
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/similarprojects/" title="Similar Projects" class="dd-item ">
        <a href="/posts/similarprojects/">
        Similar Projects
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/resources/" title="Resources" class="dd-item ">
        <a href="/posts/resources/">
        Resources
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/contact/" title="Contact" class="dd-item ">
        <a href="/posts/contact/">
        Contact
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable sticky-parent">
              
              <div class="sticky-spacer">
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>RequestCoin</a> > <a href='/posts/'>Posts</a> > Example
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Example</h1>
          

        


<p>In the not-to-distant future, farmers all around the world could pay Ether into a smart contract that would provide agricultural insurance against hail or drought. Then, throughout the year, as &ldquo;request miners&rdquo; detect these specific weather conditions using multiple APIs and other internet sources, the contract would deterministically pay Ether back to the farmers in need. This incredibly efficient system completely sidesteps an entire field of insurance agents and adjusters, immediately helping the farmers in need without any unnecessary overhead.</p>

<p>Let&rsquo;s dive into an oversimplified (and insecure) example contract just to understand the mechanics of how such a system would work.</p>

<p>First, we&rsquo;ll need a way to signal miners that a consensus is needed for a particular data point:</p>

<pre><code class="language-javascript">mapping (bytes32 =&gt; string) public requests;

function addRequest(bytes32 _id, string _url) returns (bool){
    requests[_id]=_url;
    AddRequest(msg.sender,_id,requests[_id]);
}
event AddRequest(address _sender,bytes32 _id, string _url);
</code></pre>

<p>With the <strong>addRequest</strong> function we can store a request and trigger an event called <strong>AddRequest</strong> on the blockchain.</p>

<p>Miners, incentivized by a reserved token, then make requests to a number of internet endpoints, collecting relevant data, and sending it back to the contract.</p>

<pre><code class="language-javascript">contract.getPastEvents('AddRequest', {
    fromBlock: params.blockNumber,
    toBlock: 'latest'
}, function(error, events){
  for(let e in events){
    request(events[e].returnValues._url, function (error, response, body) {
       contract.methods.addResponse(events[e].returnValues._id,body).send({
         from: params.account,
         gas: params.gas,
         gasPrice:params.gasPrice
       })
    })
  }
})
</code></pre>

<p>The <strong>addResponse</strong> method is used to store the final response that other contracts could then use to drive their logic.</p>

<pre><code class="language-javascript">mapping(bytes32 =&gt; uint ) public responses;

function addResponse(bytes32 _id,uint _result) returns (bool){
    responses[_id]=_result;
    AddResponse(msg.sender,_id,responses[_id]);
}
event AddResponse(address _sender,bytes32 _id,uint _result);
</code></pre>

<p>This simplified example is the heart of a decentralized oracle network and in the following posts, we will build a more robust system around this idea.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/posts/introduction/" title="Introduction"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/posts/utilitytoken/" title="Utility Token" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1507892884"></script>
    <script src="/js/perfect-scrollbar.min.js?1507892884"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1507892884"></script>
    <script src="/js/jquery.sticky-kit.min.js?1507892884"></script>
    <script src="/js/featherlight.min.js?1507892884"></script>
    <script src="/js/html5shiv-printshiv.min.js?1507892884"></script>
    <script src="/js/highlight.pack.js?1507892884"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1507892884"></script>
    <script src="/js/learn.js?1507892884"></script>
    <script src="/js/hugo-learn.js?1507892884"></script>

    <link href="/mermaid/mermaid.css?1507892884" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1507892884"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

